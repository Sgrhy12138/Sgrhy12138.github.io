<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title> [ Hexo ]</title><link rel="stylesheet" href="/css/temp.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="menu-outer"><nav id="menu-inner"><a href="/">Home</a><a href="/about">About</a><a href="/contact">Contact</a><a href="/archives">Archives</a></nav></div><div id="content-outer"><div id="content-inner"><article id="post"><h1></h1><p>#include&lt;bits/stdc++.h&gt;<br>#define LL long long<br>using namespace std;<br>const int maxn = 1e6+5;<br>int T,n;<br>int a[maxn],nxt[maxn];<br>int ans[maxn],s[maxn];<br>int l,r,ll,rr,top;<br>int get(int x,int y,int xl,int xr)<br>{<br>    for (int i=1;i&lt;2*n;i++)<br>        if (((a[i]==x&amp;&amp;a[i+1]==y)||(a[i]==y&amp;&amp;a[i+1]==x))&amp;&amp;(i!=xl&amp;&amp;i+1!=xr)) return ll=i;<br>    return 0;<br>}<br>void print()<br>{<br>    for (int i=1;i&lt;=n;i++)<br>        if (ans[i]==1) printf(“L”);<br>            else printf(“R”);<br>    for (int i=n;i;i–) {<br>        if (s[i]==a[ll]) {ll++,printf(“L”); continue;}<br>        if (s[i]==a[rr]) rr–,printf(“R”);<br>    }<br>    printf(“\n”);<br>}<br>int main()<br>{<br>    freopen(“palin.in”,”r”,stdin);<br>    freopen(“palin.out”,”w”,stdout);</p>
<pre><code>scanf(&quot;%d&quot;,&amp;T);
while (T--) &#123;
    scanf(&quot;%d&quot;,&amp;n);
    for (int i=1;i&lt;=2*n;i++) scanf(&quot;%d&quot;,&amp;a[i]);
    if (n&lt;=1) &#123;printf(&quot;LL\n&quot;); continue;&#125;
    for (int i=1;i&lt;2*n;i++) nxt[a[i]]=a[i+1];
    l=1,r=2*n;

    if (get(a[l],a[l+1],l,l+1)) &#123;
        rr=ll+1,l+=2;
        ans[1]=1,ans[top=2]=1,s[1]=a[1],s[2]=a[2];
        while (1) &#123;
            if (a[l]==a[ll-1]&amp;&amp;ll-l&gt;1) &#123;ans[++top]=1,s[top]=a[l],ll--,l++; continue;&#125;
            if (a[l]==a[rr+1]&amp;&amp;l&lt;ll&amp;&amp;rr&lt;r) &#123;ans[++top]=1,s[top]=a[l],rr++,l++; continue;&#125;
            if (a[r]==a[ll-1]&amp;&amp;rr&lt;r&amp;&amp;l&lt;ll) &#123;ans[++top]=2,s[top]=a[r],ll--,r--; continue;&#125;
            if (a[r]==a[rr+1]&amp;&amp;r-rr&gt;1) &#123;ans[++top]=2,s[top]=a[r],rr++,r--; continue;&#125;
            break;
        &#125;
        if (top==n) &#123;print(); continue;&#125;
    &#125;
    l=1,r=2*n;
    if (get(a[l],a[r],l,l+1)) &#123;
        rr=ll+1,l++,r--;
        ans[1]=1,ans[top=2]=2,s[1]=a[1],s[2]=a[2*n];
        while (1) &#123;
            if (a[l]==a[ll-1]&amp;&amp;ll-l&gt;1) &#123;ans[++top]=1,s[top]=a[l],ll--,l++; continue;&#125;
            if (a[l]==a[rr+1]&amp;&amp;l&lt;ll&amp;&amp;rr&lt;r) &#123;ans[++top]=1,s[top]=a[l],rr++,l++; continue;&#125;
            if (a[r]==a[ll-1]&amp;&amp;rr&lt;r&amp;&amp;l&lt;ll) &#123;ans[++top]=2,s[top]=a[r],ll--,r--; continue;&#125;
            if (a[r]==a[rr+1]&amp;&amp;r-rr&gt;1) &#123;ans[++top]=2,s[top]=a[r],rr++,r--; continue;&#125;
            break;
        &#125;
        if (top==n) &#123;print(); continue;&#125;
    &#125;
    l=1,r=2*n;
    if (get(a[r],a[r-1],r-1,r)) &#123;
        rr=ll+1,r-=2;
        ans[1]=2,ans[top=2]=2,s[1]=a[2*n],s[2]=a[2*n-1];
        while (1) &#123;
            if (a[l]==a[ll-1]&amp;&amp;ll-l&gt;1) &#123;ans[++top]=1,s[top]=a[l],ll--,l++; continue;&#125;
            if (a[l]==a[rr+1]&amp;&amp;l&lt;ll&amp;&amp;rr&lt;r) &#123;ans[++top]=1,s[top]=a[l],rr++,l++; continue;&#125;
            if (a[r]==a[ll-1]&amp;&amp;rr&lt;r&amp;&amp;l&lt;ll) &#123;ans[++top]=2,s[top]=a[r],ll--,r--; continue;&#125;
            if (a[r]==a[rr+1]&amp;&amp;r-rr&gt;1) &#123;ans[++top]=2,s[top]=a[r],rr++,r--; continue;&#125;
            break;
        &#125;
        if (top==n) &#123;print(); continue;&#125;
    &#125;
    printf(&quot;-1\n&quot;);
&#125;

return 0;
</code></pre>
<p>}</p>
</article><div id="paginator"></div></div></div><div id="bottom-outer"><div id="bottom-inner"><span>Site construction by</span><span> John Doe </span><span>using</span><a target="_blank" rel="noopener" href="http://hexo.io"><span>hexo blog framework</span></a><span>.</span><br><a href="/">Home</a></div></div><script src="/js/temp.js"></script></body></html>